# SpecGate 데모 시나리오 (구현 전 버전)

## 🎬 **데모 시나리오 개요**

**현재 상황**: 아직 구현 전이므로 실제 데모 대신 **시나리오 설명**과 **화면 목업**을 활용

**데모 목표**: 
- SpecGate의 작동 원리를 시각적으로 설명
- 청중이 실제 사용 경험을 상상할 수 있도록 함
- 구현 후 실제 데모의 기반 자료로 활용

---

## 📱 **시나리오 1: 개발 단계 - Cursor IDE 통합**

### **1-1. SpecGate MCP 연결**

#### 화면 목업
```
┌─────────────────────────────────────────────────────────┐
│ Cursor IDE - MCP 서버 연결                              │
├─────────────────────────────────────────────────────────┤
│ 🔗 MCP 서버 연결됨: SpecGate                           │
│ 📄 Confluence 문서 수집 완료: 5개 문서                  │
│ 🚪 Phase 1 완료: 문서 정규화 및 품질 검사              │
│ ⚡ Phase 2 완료: DesignRuleSpec 생성                    │
│ ✅ Phase 3 준비: 테스트 및 CI 검증 준비                │
│                                                         │
│ 💡 SpecGate가 준비되었습니다. 개발을 시작하세요!        │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "SpecGate MCP 서버가 Confluence에서 설계 문서를 자동으로 수집했습니다"
- "3단계 문을 통해 설계 규칙을 실행 가능한 형태로 변환했습니다"
- "이제 개발하면서 실시간으로 설계 가이드를 받을 수 있습니다"

### **1-2. 실시간 룰 적용**

#### 화면 목업
```
┌─────────────────────────────────────────────────────────┐
│ 📄 UserController.java - SpecGate 룰 적용됨             │
├─────────────────────────────────────────────────────────┤
│ @RestController  ← 🚪 SpecGate 룰 적용                 │
│ @RequestMapping("/api/v1/users")                        │
│ public class UserController {                           │
│                                                         │
│   @GetMapping("/{id}")  ← RESTful 패턴 제안            │
│   public ResponseEntity<User> getUser(                  │
│       @PathVariable Long id) {                          │
│     // SpecGate가 제안한 스니펫                          │
│     return userService.findById(id);                    │
│   }                                                      │
│                                                         │
│   @PostMapping  ← POST 메서드 자동완성                  │
│   public ResponseEntity<User> createUser(               │
│       @RequestBody User user) {                         │
│     // SpecGate가 제안한 스니펫                          │
│     return userService.save(user);                      │
│   }                                                      │
│ }                                                        │
│                                                         │
│ 💡 SpecGate: RULE-API-001 적용됨 - RESTful 원칙 준수    │
│ 💡 SpecGate: RULE-API-002 적용됨 - 응답 형식 표준화     │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "Cursor IDE에서 SpecGate가 자동으로 설계 규칙을 적용했습니다"
- "RESTful 원칙에 맞는 코드 구조를 실시간으로 제안합니다"
- "개발자가 설계를 몰라도 자동으로 올바른 코드를 작성할 수 있습니다"

### **1-3. 위반 감지 및 수정 가이드**

#### 화면 목업
```
┌─────────────────────────────────────────────────────────┐
│ ⚠️ SpecGate 위반 감지                                   │
├─────────────────────────────────────────────────────────┤
│ RULE-API-001 위반: RESTful 원칙 위반                    │
│                                                         │
│ 문제: getUserData() 메서드명이 RESTful 원칙에 맞지 않음  │
│                                                         │
│ 현재 코드:                                              │
│ @GetMapping("/users/{id}")                              │
│ public ResponseEntity<User> getUserData(@PathVariable Long id) │
│                                                         │
│ 수정 제안:                                              │
│ @GetMapping("/users/{id}")                              │
│ public ResponseEntity<User> getUser(@PathVariable Long id) │
│                                                         │
│ 근거: RESTful API는 리소스명을 동사로 사용해야 함        │
│                                                         │
│ [자동 수정] [수동 수정] [무시하기] [도움말]              │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "잘못된 코드를 작성하면 SpecGate가 즉시 감지합니다"
- "구체적인 수정 방법과 근거를 제시합니다"
- "개발자가 설계 원칙을 배우면서 코드를 수정할 수 있습니다"

---

## 🔄 **시나리오 2: PR/CI 단계 - 자동 검증**

### **2-1. 설계 위반 코드로 PR 생성**

#### GitHub PR 화면 목업
```
┌─────────────────────────────────────────────────────────┐
│ GitHub PR #123 - Add User Management API                │
├─────────────────────────────────────────────────────────┤
│ 📝 Description                                          │
│ - 사용자 관리 API 추가                                  │
│ - CRUD 기능 구현                                        │
│                                                         │
│ 📁 Files changed (3)                                   │
│ + UserController.java                                   │
│ + UserService.java                                      │
│ + User.java                                             │
│                                                         │
│ ⚠️ SpecGate Design Guard 실행 중...                    │
│ 🔍 ArchUnit 테스트 실행 중...                          │
│ 🔍 Semgrep 보안 검사 실행 중...                        │
│ 🔍 OpenAPI Diff 검사 실행 중...                        │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "PR을 생성하면 SpecGate가 자동으로 설계 검증을 시작합니다"
- "ArchUnit, Semgrep, OpenAPI Diff 등 다양한 도구로 검사합니다"
- "개발자가 별도로 설정하지 않아도 자동으로 실행됩니다"

### **2-2. Drift Radar 결과 표시**

#### Drift Radar 코멘트 목업
```
┌─────────────────────────────────────────────────────────┐
│ 🎯 Drift Radar - SpecGate Design Guard                 │
├─────────────────────────────────────────────────────────┤
│ 📊 전체 점수: 65/100 ⚠️ PR 차단 (임계치: 50점)          │
│                                                         │
│ 📈 영역별 점수                                          │
│ ┌─────────┬──────┬──────┬──────────────┐                │
│ │ 영역    │ 점수 │ 상태 │ 주요 위반     │                │
│ ├─────────┼──────┼──────┼──────────────┤                │
│ │ API     │ 45   │ 🔴   │ RESTful 위반 3건 │                │
│ │ 아키텍처│ 20   │ 🟡   │ 계층 분리 위반 1건 │                │
│ │ 보안    │ 10   │ 🟢   │ -            │                │
│ │ 성능    │ 15   │ 🟡   │ N+1 쿼리 1건  │                │
│ │ 데이터  │ 5    │ 🟢   │ -            │                │
│ └─────────┴──────┴──────┴──────────────┘                │
│                                                         │
│ 🚨 주요 위반 사항                                       │
│ 1. RULE-API-001 위반 (MUST)                            │
│    파일: UserController.java:25                        │
│    문제: getUserData() 메서드명이 RESTful 원칙에 맞지 않음 │
│    수정 방법: getUser() 또는 getUserById()로 변경       │
│                                                         │
│ 2. RULE-ARCH-001 위반 (MUST)                           │
│    파일: UserController.java:30                        │
│    문제: Controller에서 Repository 직접 호출           │
│    수정 방법: Service 계층을 통한 호출로 변경           │
│                                                         │
│ 💡 개선 제안                                            │
│ - 수정 후 예상 점수: 15/100 (통과)                     │
│ - 우선순위: API 규칙 수정 → 아키텍처 규칙 수정          │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "Drift Radar가 설계 위반을 시각적으로 보여줍니다"
- "영역별로 점수를 나누어 어디에 문제가 있는지 명확히 표시합니다"
- "구체적인 수정 방법과 예상 결과를 제시합니다"

### **2-3. CI 실패 및 PR 차단**

#### GitHub Actions 결과 목업
```
┌─────────────────────────────────────────────────────────┐
│ GitHub Actions - Design Guard                          │
├─────────────────────────────────────────────────────────┤
│ ✅ Checkout                                             │
│ ✅ Setup Java                                           │
│ ✅ Setup Node.js                                        │
│ ❌ ArchUnit Tests (실패)                                │
│   └─ RULE-ARCH-001: Controller는 Service만 의존해야 함   │
│   └─ RULE-API-001: RESTful 원칙 준수 필요              │
│ ❌ Semgrep Security Scan (실패)                         │
│   └─ RULE-SEC-001: SQL Injection 방지 필요              │
│ ✅ OpenAPI Diff                                         │
│ ❌ Calculate Drift Score: 65/100                        │
│ ❌ Check Drift Score Threshold: PR 차단됨               │
│                                                         │
│ 🚫 PR 차단: Drift Score 65점이 임계치 50점을 초과했습니다 │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "Drift Score가 임계치를 초과하면 PR이 자동으로 차단됩니다"
- "설계 위반이 있는 코드는 절대 메인 브랜치에 머지되지 않습니다"
- "개발자가 반드시 설계를 준수하도록 강제합니다"

---

## ✅ **시나리오 3: 수정 및 통과**

### **3-1. Drift Radar 가이드에 따른 수정**

#### 수정된 코드 화면 목업
```
┌─────────────────────────────────────────────────────────┐
│ 📄 UserController.java - 수정 완료                      │
├─────────────────────────────────────────────────────────┤
│ @RestController                                         │
│ @RequestMapping("/api/v1/users")                        │
│ public class UserController {                           │
│                                                         │
│   @Autowired                                            │
│   private UserService userService;  ← Service 주입      │
│                                                         │
│   @GetMapping("/{id}")                                  │
│   public ResponseEntity<User> getUser(  ← 수정됨        │
│       @PathVariable Long id) {                          │
│     return userService.findById(id);  ← Service 호출    │
│   }                                                      │
│                                                         │
│   @PostMapping                                          │
│   public ResponseEntity<User> createUser(               │
│       @RequestBody User user) {                         │
│     return userService.save(user);                      │
│   }                                                      │
│ }                                                        │
│                                                         │
│ ✅ SpecGate: 모든 규칙 준수됨                           │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "Drift Radar의 가이드를 따라 코드를 수정했습니다"
- "Controller에서 Service를 통한 호출로 변경했습니다"
- "RESTful 원칙에 맞게 메서드명을 수정했습니다"

### **3-2. 재검사 및 통과**

#### Drift Radar 재검사 결과 목업
```
┌─────────────────────────────────────────────────────────┐
│ 🎯 Drift Radar - SpecGate Design Guard                 │
├─────────────────────────────────────────────────────────┤
│ 📊 전체 점수: 15/100 ✅ 통과 (임계치: 50점)             │
│                                                         │
│ 📈 영역별 점수                                          │
│ ┌─────────┬──────┬──────┬──────────────┐                │
│ │ 영역    │ 점수 │ 상태 │ 주요 위반     │                │
│ ├─────────┼──────┼──────┼──────────────┤                │
│ │ API     │ 5    │ 🟢   │ -            │                │
│ │ 아키텍처│ 5    │ 🟢   │ -            │                │
│ │ 보안    │ 5    │ 🟢   │ -            │                │
│ │ 성능    │ 0    │ 🟢   │ -            │                │
│ │ 데이터  │ 0    │ 🟢   │ -            │                │
│ └─────────┴──────┴──────┴──────────────┘                │
│                                                         │
│ 🎉 축하합니다! 설계 준수를 잘 하고 있습니다.            │
│ 💡 추가 개선 사항: 성능 최적화 고려사항 검토            │
└─────────────────────────────────────────────────────────┘
```

#### 설명 포인트
- "수정 후 Drift Score가 15점으로 크게 개선되었습니다"
- "모든 영역에서 설계 준수 상태를 달성했습니다"
- "PR이 통과되어 메인 브랜치에 머지될 수 있습니다"

---

## 🎯 **데모 핵심 포인트**

### **1. 자동화의 힘**
- 개발자가 별도로 설정하지 않아도 자동으로 작동
- 설계 문서에서 실행 가능한 규칙으로 자동 변환
- PR 생성 시 자동으로 설계 검증 실행

### **2. 실시간 가이드**
- 코드 작성 중 실시간으로 설계 가이드 제공
- 위반 사항을 즉시 감지하고 수정 방법 제시
- 개발자가 설계 원칙을 배우면서 코드 작성

### **3. 강력한 검증**
- Drift Score로 설계 준수도를 객관적으로 측정
- 임계치 초과 시 PR 자동 차단으로 품질 보장
- 영역별 세부 분석으로 구체적인 개선 방향 제시

### **4. 완전한 피드백 루프**
- 위반 → 수정 → 통과의 완전한 사이클
- 설계와 코드의 지속적인 동기화
- 품질과 생산성의 동시 향상
